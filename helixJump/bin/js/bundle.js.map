{"version":3,"file":"bundle.js","sources":["../../src/scripts/FollowCamera.ts","../../src/scripts/Player.ts","../../src/scripts/Rotation.ts","../../src/scripts/SpawnParticle.ts","../../src/scripts/SpawnPlatform.ts","../../src/scripts/App.ts","../../src/scripts/ScoreHint.ts","../../src/GameConfig.ts","../../src/Main.ts"],"sourcesContent":["export default class FollowCamera extends Laya.Script3D {\n    constructor() { super(); }\n    \n    characterCtrl:Laya.CharacterController;\n    onAwake(){\n        Laya.stage.on(\"MoveCamera\",this,this.follow);\n    }\n\n    onEnable(): void {\n    }\n\n    onDisable(): void {\n    }\n\n    follow(posY){\n        Laya.Tween.to((this.owner as Laya.Sprite3D).transform,{localPositionY:posY},300);\n    }\n}","export default class Player extends Laya.Script3D {\n    constructor() { super(); }\n\n    characterCtrl: Laya.CharacterController;\n    private _physicsSimulation: Laya.PhysicsSimulation;\n    private _ray: Laya.Ray;\n    private _hitResult: Laya.HitResult;\n    onAwake() {\n        this.characterCtrl = this.owner.addComponent(Laya.CharacterController);\n        let collider = new Laya.SphereColliderShape(0.5);\n        this.characterCtrl.colliderShape = collider;\n        this.characterCtrl.jumpSpeed = 8;\n        this.characterCtrl.fallSpeed = 10;\n\n        this._physicsSimulation = (this.owner.parent as Laya.Scene3D).physicsSimulation;// 发射射线\n        this._ray = new Laya.Ray(new Laya.Vector3(), new Laya.Vector3(0, -1, 0));\n        this._hitResult = new Laya.HitResult();\n\n        Laya.timer.frameLoop(1, this, this.rayCast);\n    }\n\n    onEnable(): void {\n    }\n\n    onDisable(): void {\n    }\n\n    private _throughCount: number = 0;\n    rayCast() {\n        this._ray.origin = (this.owner as Laya.Sprite3D).transform.position;\n        if (this._throughCount >= 3 && this._physicsSimulation.rayCast(this._ray, this._hitResult, 0.2)) {//无敌状态碰撞到其他平台时\n            let collider = this._hitResult.collider as Laya.PhysicsTriggerComponent;\n            let numChildren = collider.owner.parent.numChildren;\n            for (let i = 0; i < numChildren; i++) {\n                let child = collider.owner.parent.getChildAt(i) as Laya.MeshSprite3D;\n                child.name = \"Bar\";\n                (child.meshRenderer.material as Laya.PBRStandardMaterial).albedoColor.x = 0;\n                (child.meshRenderer.material as Laya.PBRStandardMaterial).albedoColor.y = 0;\n                (child.meshRenderer.material as Laya.PBRStandardMaterial).albedoColor.z = 1;\n            }\n        }\n        if (this._physicsSimulation.rayCast(this._ray, this._hitResult, 0.15)) {\n            let collider = this._hitResult.collider as Laya.PhysicsTriggerComponent;\n            if (collider.owner.name == \"Obstacle\") {\n                Laya.stage.event(\"GameOver\");\n                (this.owner as Laya.Sprite3D).transform.localScaleY = 0.15;\n                return;\n            }\n            if (collider.isTrigger) {\n                this._throughCount++;\n                collider.owner.parent.removeSelf();\n                Laya.Pool.recover(\"Platform\", collider.owner.parent);\n                Laya.stage.event(\"MoveCamera\", (collider.owner.parent as Laya.Sprite3D).transform.localPositionY);\n                Laya.stage.event(\"SpawnPlatform\");\n                Laya.stage.event(\"Hint\",1);\n            } else {\n                this._throughCount = 0;\n                this.characterCtrl.jump();\n                Laya.stage.event(\"SpawnParticle\", this._hitResult.point);\n\n            }\n        }\n    }\n\n    // onCollisionEnter(collision: Laya.Collision) {\n    //     // let other = collision.other.owner;\n    //     this.characterCtrl.jump();\n    // }\n\n    // onTriggerEnter(other: Laya.PhysicsComponent) {\n    //     // console.log(other);\n    //     other.owner.parent.active = false;\n    //     Laya.stage.event(\"MoveCamera\", (other.owner.parent as Laya.Sprite3D).transform.localPositionY);\n    // }\n}","export default class Rotation extends Laya.Script {\n    constructor() { super(); }\n\n    _gameOver:boolean = false;\n    onAwake() {\n        Laya.stage.on(\"GameOver\",this,()=>{\n            this._gameOver =true;\n        });\n        if(Laya.Browser.onPC){\n            Laya.stage.on(Laya.Event.MOUSE_DOWN, this, this.onMouseDown);\n            Laya.stage.on(Laya.Event.MOUSE_UP, this, this.onMouseUp);\n            Laya.stage.on(Laya.Event.MOUSE_OUT, this, this.onMouseUp);\n        }\n    }\n\n    _lastMouseX: number = 0;\n    onMouseDown(e: Laya.Event) {\n        this._lastMouseX = Laya.stage.mouseX;\n        Laya.stage.on(Laya.Event.MOUSE_MOVE, this, this.onMouseMove);\n    }\n\n    onMouseMove(e: Laya.Event) {\n        if(this._gameOver)return;\n        let deltaX = Laya.stage.mouseX - this._lastMouseX;\n        this._lastMouseX = Laya.stage.mouseX;\n        (this.owner as Laya.Sprite3D).transform.rotate(new Laya.Vector3(0, deltaX / 5, 0), true, false);\n    }\n\n    onMouseUp() {\n        Laya.stage.off(Laya.Event.MOUSE_MOVE, this, this.onMouseMove);\n    }\n\n    onEnable(): void {\n    }\n\n    onDisable(): void {\n    }\n\n    _firstTouch: boolean = true;\n    onUpdate() {\n        if(Laya.Browser.onPC||this._gameOver)return;\n        if ((this.owner.parent as Laya.Scene3D).input.touchCount() == 1) {\n            let touch = (this.owner.parent as Laya.Scene3D).input.getTouch(0);\n            if (this._firstTouch) {\n                this._firstTouch = false;\n                this._lastMouseX = touch.position.x;\n            } else {\n                let deltaX = touch.position.x - this._lastMouseX;\n                this._lastMouseX = Laya.stage.mouseX;\n                (this.owner as Laya.Sprite3D).transform.rotate(new Laya.Vector3(0, deltaX / 5, 0), true, false);\n            }\n        } else {\n            this._firstTouch = true;\n            this._lastMouseX = 0;\n        }\n    }\n\n}","export default class SpawnParticle extends Laya.Script {\n\n    constructor() { super(); }\n\n\n\n    private _prefab: Laya.Sprite3D;\n    private _parent: Laya.Node;\n    init(prefab: Laya.Sprite3D, parent: Laya.Node) {\n        this._prefab = prefab;\n        this._parent = parent;\n        Laya.stage.on(\"SpawnParticle\", this, this.spawn);\n    }\n\n    spawn(pos:Laya.Vector3) {\n        let sprite3D = Laya.Pool.getItemByCreateFun(\"Particle\", this.create, this) as Laya.Sprite3D;\n        this._parent.addChild(sprite3D);\n        sprite3D.transform.localPosition = pos;\n        Laya.timer.once(1500,this,()=>{\n            sprite3D.removeSelf();\n            Laya.Pool.recover(\"Particle\",sprite3D);\n        })\n    }\n\n    create() {\n        return Laya.Sprite3D.instantiate(this._prefab, this._parent);\n    }\n}","export default class SpawnPlatform extends Laya.Script {\n\n    constructor() { super(); }\n\n    onEnable(): void {\n    }\n\n    onDisable(): void {\n    }\n\n    private _curIdx: number = 0;\n    private _curPosY: number = -1;\n    private _spanHeight: number = 1.5;\n    private _prefab: Laya.Sprite3D;\n    private _parent: Laya.Node;\n    init(prefab: Laya.Sprite3D, parent: Laya.Node) {\n        this._prefab = prefab;\n        this._parent = parent;\n        for (let i = 0; i < 5; i++) {\n            this.spawn();\n        }\n        Laya.stage.on(\"SpawnPlatform\", this, this.spawn);\n    }\n\n    spawn() {\n        let sprite3D = Laya.Pool.getItemByCreateFun(\"Platform\", this.create, this);\n        let posY = this._curPosY - (this._curIdx * this._spanHeight);\n        sprite3D.transform.localPosition = new Laya.Vector3(0, posY, 0);\n        this._parent.addChild(sprite3D);\n        this.emptyPlatform(sprite3D);\n        this._curIdx++;\n    }\n\n    create() {\n        return Laya.Sprite3D.instantiate(this._prefab, this._parent);\n    }\n\n    emptyPlatform(platform: Laya.Sprite3D) {\n        let count = 0;\n        let obstacleIdx = this.getRandom(0, platform.numChildren - 1);\n        if(this._curIdx==0){\n            this.resetPlatform(platform);\n            return;\n        }\n        for (let i = 0; i < platform.numChildren; i++) {\n            let child = platform.getChildAt(i) as Laya.MeshSprite3D;\n            child.meshRenderer.enable = true;\n            child.getComponent(Laya.PhysicsCollider).isTrigger = false;\n            (child.meshRenderer.material as Laya.PBRStandardMaterial).albedoColor.x = 0;\n            (child.meshRenderer.material as Laya.PBRStandardMaterial).albedoColor.y = 0;\n            (child.meshRenderer.material as Laya.PBRStandardMaterial).albedoColor.z = 0;\n            child.name = \"Bar\";\n            let rnd = this.getRandom(0, 10);\n            if (obstacleIdx != i && count <= 4 && rnd > 8) {\n                count++;\n                child.meshRenderer.enable = false;\n                child.getComponent(Laya.PhysicsCollider).isTrigger = true;\n            } else if (obstacleIdx == i) {\n                child.name = \"Obstacle\";\n                (child.meshRenderer.material as Laya.PBRStandardMaterial).albedoColor.x = 1;\n                (child.meshRenderer.material as Laya.PBRStandardMaterial).albedoColor.y = 0;\n                (child.meshRenderer.material as Laya.PBRStandardMaterial).albedoColor.z = 0;\n            }\n        }\n\n        if (count == 0) {\n            let child = platform.getChildAt(0) as Laya.MeshSprite3D;\n            child.name = \"Bar\";\n            child.meshRenderer.enable = false;\n            child.getComponent(Laya.PhysicsCollider).isTrigger = true;\n        }\n    }\n\n    resetPlatform(platform: Laya.Sprite3D) {\n        for (let i = 0; i < platform.numChildren; i++) {\n            let child = platform.getChildAt(i) as Laya.MeshSprite3D;\n            (child.meshRenderer.material as Laya.PBRStandardMaterial).albedoColor.x = 0;\n            (child.meshRenderer.material as Laya.PBRStandardMaterial).albedoColor.y = 0;\n            (child.meshRenderer.material as Laya.PBRStandardMaterial).albedoColor.z = 0;\n            if (i == 0 || i == 1) {\n                child.meshRenderer.enable = false;\n                child.getComponent(Laya.PhysicsCollider).isTrigger = true;\n            } else {\n                child.meshRenderer.enable = true;\n                child.getComponent(Laya.PhysicsCollider).isTrigger = false;\n            }\n        }\n    }\n\n    getRandom(min: number, max: number) {\n        let delta = max - min;\n        let randomValue = Math.random() * delta;\n        return min + Math.round(randomValue);\n    }\n}","import FollowCamera from \"./FollowCamera\";\nimport Player from \"./Player\";\nimport Rotation from \"./Rotation\";\nimport SpawnParticle from \"./SpawnParticle\";\nimport SpawnPlatform from \"./SpawnPlatform\";\n\nexport default class App extends Laya.Script {\n    constructor() { super(); }\n    \n    onAwake(){\n        Laya.Scene3D.load(\"res/3dScene/LayaScene_Main/Conventional/Main.ls\",Laya.Handler.create(this,this.onLoaded))\n    }\n\n    private _column:Laya.Sprite3D;\n    private _particlePrefab:Laya.Sprite3D;\n    onLoaded(scene:Laya.Scene3D){\n        Laya.stage.addChild(scene);\n        let parent = scene.getChildByName(\"Parent\");\n        parent.addComponent(Rotation);\n\n        let player = scene.getChildByName(\"Player\");\n        player.addComponent(Player);\n\n        let platform = parent.getChildByName(\"Platform\") as Laya.Sprite3D;\n        let platformPrefab = Laya.Sprite3D.instantiate(platform);\n        platform.active =false;\n        this.owner.addComponent(SpawnPlatform).init(platformPrefab,parent);\n\n        scene.getChildByName(\"Main Camera\").addComponent(FollowCamera);\n\n        this._column = parent.getChildByName(\"Column\") as Laya.Sprite3D;\n        Laya.stage.on(\"SpawnPlatform\",this,this.moveColumn);\n\n        let trail = scene.getChildByName(\"TrailRender\") as Laya.Sprite3D;\n        player.addChild(trail);\n        trail.transform.localPosition = new Laya.Vector3();\n\n        let particle = scene.getChildByName(\"Particle\") as Laya.Sprite3D;\n        let particlePrefab = Laya.Sprite3D.instantiate(particle);\n        particle.active =false;\n        this.owner.addComponent(SpawnParticle).init(particlePrefab,scene);\n    }\n\n    moveColumn(){\n        this._column.transform.localPositionY -= 1.5;\n    }\n\n\n\n    onEnable(): void {\n    }\n\n    onDisable(): void {\n    }\n}","export default class ScoreHint extends Laya.Script {\n    /** @prop {name:txt_Hint, tips:\"提示文本\", type:Prefab, default:null}*/\n    public txt_Hint: Laya.Prefab;\n\n    \n    constructor() { super(); }\n    \n    onEnable(): void {\n    }\n\n    onDisable(): void {\n    }\n\n    onAwake(){\n        // Laya.loader.load(\"prefab/txt_Hint.json\",Laya.Handler.create(this,(prefab)=>{\n\n        // }),null,Laya.Loader.PREFAB);\n        Laya.stage.on(\"Hint\",this,this.show);\n    }\n\n    show(score:number){\n        let txt_hint = Laya.Pool.getItemByCreateFun(\"Hint\",this.create,this) as Laya.Text;\n        txt_hint.text = `+${score}`;\n        Laya.stage.addChild(txt_hint);\n    }\n\n    create(){\n        return this.txt_Hint.create();\n    }\n}","/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */\nimport App from \"./scripts/App\"\nimport ScoreHint from \"./scripts/ScoreHint\"\n/*\n* 游戏初始化配置;\n*/\nexport default class GameConfig{\n    static width:number=640;\n    static height:number=1136;\n    static scaleMode:string=\"fixedwidth\";\n    static screenMode:string=\"none\";\n    static alignV:string=\"top\";\n    static alignH:string=\"left\";\n    static startScene:any=\"Main.scene\";\n    static sceneRoot:string=\"\";\n    static debug:boolean=false;\n    static stat:boolean=false;\n    static physicsDebug:boolean=false;\n    static exportSceneToJson:boolean=true;\n    constructor(){}\n    static init(){\n        var reg: Function = Laya.ClassUtils.regClass;\n        reg(\"scripts/App.ts\",App);\n        reg(\"scripts/ScoreHint.ts\",ScoreHint);\n    }\n}\nGameConfig.init();","import GameConfig from \"./GameConfig\";\nclass Main {\n\tconstructor() {\n\t\t//根据IDE设置初始化引擎\t\t\n\t\tif (window[\"Laya3D\"]) Laya3D.init(GameConfig.width, GameConfig.height);\n\t\telse Laya.init(GameConfig.width, GameConfig.height, Laya[\"WebGL\"]);\n\t\tLaya[\"Physics\"] && Laya[\"Physics\"].enable();\n\t\tLaya[\"DebugPanel\"] && Laya[\"DebugPanel\"].enable();\n\t\tLaya.stage.scaleMode = GameConfig.scaleMode;\n\t\tLaya.stage.screenMode = GameConfig.screenMode;\n\t\tLaya.stage.alignV = GameConfig.alignV;\n\t\tLaya.stage.alignH = GameConfig.alignH;\n\t\t//兼容微信不支持加载scene后缀场景\n\t\tLaya.URL.exportSceneToJson = GameConfig.exportSceneToJson;\n\n\t\t//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）\n\t\tif (GameConfig.debug || Laya.Utils.getQueryString(\"debug\") == \"true\") Laya.enableDebugPanel();\n\t\tif (GameConfig.physicsDebug && Laya[\"PhysicsDebugDraw\"]) Laya[\"PhysicsDebugDraw\"].enable();\n\t\tif (GameConfig.stat) Laya.Stat.show();\n\t\tLaya.alertGlobalError(true);\n\n\t\t//激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程\n\t\tLaya.ResourceVersion.enable(\"version.json\", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);\n\t}\n\n\tonVersionLoaded(): void {\n\t\t//激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图\n\t\tLaya.AtlasInfoManager.enable(\"fileconfig.json\", Laya.Handler.create(this, this.onConfigLoaded));\n\t}\n\n\tonConfigLoaded(): void {\n\t\t//加载IDE指定的场景\n\t\tGameConfig.startScene && Laya.Scene.open(GameConfig.startScene);\n\t}\n}\n//激活启动类\nnew Main();\n"],"names":[],"mappings":"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"}