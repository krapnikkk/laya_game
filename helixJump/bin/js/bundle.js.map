{"version":3,"file":"bundle.js","sources":["../../src/scripts/Player.ts","../../src/scripts/Rotation.ts","../../src/scripts/App.ts","../../src/GameConfig.ts","../../src/Main.ts"],"sourcesContent":["export default class Player extends Laya.Script3D {\n    constructor() { super(); }\n    \n    characterCtrl:Laya.CharacterController;\n    onAwake(){\n        this.characterCtrl = this.owner.addComponent(Laya.CharacterController);\n        let collider = new Laya.SphereColliderShape(0.5);\n        this.characterCtrl.colliderShape = collider;\n        console.log(this.characterCtrl);\n    }\n\n    onEnable(): void {\n    }\n\n    onDisable(): void {\n    }\n\n    onCollisionEnter(collision:Laya.Collision){\n        // let other = collision.other.owner;\n        this.characterCtrl.jump();\n    }\n}","export default class Rotation extends Laya.Script {\n    constructor() { super(); }\n\n    onAwake() {\n        if(Laya.Browser.onPC){\n            Laya.stage.on(Laya.Event.MOUSE_DOWN, this, this.onMouseDown);\n            Laya.stage.on(Laya.Event.MOUSE_UP, this, this.onMouseUp);\n            Laya.stage.on(Laya.Event.MOUSE_OUT, this, this.onMouseUp);\n        }\n    }\n\n    _lastMouseX: number = 0;\n    onMouseDown(e: Laya.Event) {\n        this._lastMouseX = Laya.stage.mouseX;\n        Laya.stage.on(Laya.Event.MOUSE_MOVE, this, this.onMouseMove);\n    }\n\n    onMouseMove(e: Laya.Event) {\n        let deltaX = Laya.stage.mouseX - this._lastMouseX;\n        this._lastMouseX = Laya.stage.mouseX;\n        (this.owner as Laya.Sprite3D).transform.rotate(new Laya.Vector3(0, deltaX / 5, 0), true, false);\n    }\n\n    onMouseUp() {\n        Laya.stage.off(Laya.Event.MOUSE_MOVE, this, this.onMouseMove);\n    }\n\n    onEnable(): void {\n    }\n\n    onDisable(): void {\n    }\n\n    _firstTouch: boolean = true;\n    onUpdate() {\n        if(Laya.Browser.onPC)return;\n        if ((this.owner.parent as Laya.Scene3D).input.touchCount() == 1) {\n            let touch = (this.owner.parent as Laya.Scene3D).input.getTouch(0);\n            if (this._firstTouch) {\n                this._firstTouch = false;\n                this._lastMouseX = touch.position.x;\n            } else {\n                let deltaX = touch.position.x - this._lastMouseX;\n                this._lastMouseX = Laya.stage.mouseX;\n                (this.owner as Laya.Sprite3D).transform.rotate(new Laya.Vector3(0, deltaX / 5, 0), true, false);\n            }\n        } else {\n            this._firstTouch = true;\n            this._lastMouseX = 0;\n        }\n    }\n\n}","import Player from \"./Player\";\nimport Rotation from \"./Rotation\";\n\nexport default class App extends Laya.Script {\n    constructor() { super(); }\n    \n    onAwake(){\n        Laya.Scene3D.load(\"res/3dScene/LayaScene_Main/Conventional/Main.ls\",Laya.Handler.create(this,this.onLoaded))\n    }\n\n    onLoaded(scene:Laya.Scene3D){\n        Laya.stage.addChild(scene);\n        scene.getChildByName(\"Parent\").addComponent(Rotation);\n        scene.getChildByName(\"Player\").addComponent(Player);\n    }\n\n    onEnable(): void {\n    }\n\n    onDisable(): void {\n    }\n}","/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */\nimport App from \"./scripts/App\"\n/*\n* 游戏初始化配置;\n*/\nexport default class GameConfig{\n    static width:number=640;\n    static height:number=1136;\n    static scaleMode:string=\"fixedwidth\";\n    static screenMode:string=\"none\";\n    static alignV:string=\"top\";\n    static alignH:string=\"left\";\n    static startScene:any=\"Main.scene\";\n    static sceneRoot:string=\"\";\n    static debug:boolean=false;\n    static stat:boolean=false;\n    static physicsDebug:boolean=false;\n    static exportSceneToJson:boolean=true;\n    constructor(){}\n    static init(){\n        var reg: Function = Laya.ClassUtils.regClass;\n        reg(\"scripts/App.ts\",App);\n    }\n}\nGameConfig.init();","import GameConfig from \"./GameConfig\";\nclass Main {\n\tconstructor() {\n\t\t//根据IDE设置初始化引擎\t\t\n\t\tif (window[\"Laya3D\"]) Laya3D.init(GameConfig.width, GameConfig.height);\n\t\telse Laya.init(GameConfig.width, GameConfig.height, Laya[\"WebGL\"]);\n\t\tLaya[\"Physics\"] && Laya[\"Physics\"].enable();\n\t\tLaya[\"DebugPanel\"] && Laya[\"DebugPanel\"].enable();\n\t\tLaya.stage.scaleMode = GameConfig.scaleMode;\n\t\tLaya.stage.screenMode = GameConfig.screenMode;\n\t\tLaya.stage.alignV = GameConfig.alignV;\n\t\tLaya.stage.alignH = GameConfig.alignH;\n\t\t//兼容微信不支持加载scene后缀场景\n\t\tLaya.URL.exportSceneToJson = GameConfig.exportSceneToJson;\n\n\t\t//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）\n\t\tif (GameConfig.debug || Laya.Utils.getQueryString(\"debug\") == \"true\") Laya.enableDebugPanel();\n\t\tif (GameConfig.physicsDebug && Laya[\"PhysicsDebugDraw\"]) Laya[\"PhysicsDebugDraw\"].enable();\n\t\tif (GameConfig.stat) Laya.Stat.show();\n\t\tLaya.alertGlobalError(true);\n\n\t\t//激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程\n\t\tLaya.ResourceVersion.enable(\"version.json\", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);\n\t}\n\n\tonVersionLoaded(): void {\n\t\t//激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图\n\t\tLaya.AtlasInfoManager.enable(\"fileconfig.json\", Laya.Handler.create(this, this.onConfigLoaded));\n\t}\n\n\tonConfigLoaded(): void {\n\t\t//加载IDE指定的场景\n\t\tGameConfig.startScene && Laya.Scene.open(GameConfig.startScene);\n\t}\n}\n//激活启动类\nnew Main();\n"],"names":[],"mappings":"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"}